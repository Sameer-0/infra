<%- include("../partials/head") %>
<%- include("../partials/leftSidebar") %>
<%- include("../partials/header") %>
<!--Notificaion icon-->
<!--HEADER END-->
<div class="wrapper">
    <div class="main-content">
        <!--DASHBOARD CONTENT START-->
        <div class="card">
            <div class="row my-3 gx-1 gy-3 row1-data">

                <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                    <div class="card row1-data-card text-center">
                        <div class="card-body d-flex align-items-center justify-content-center"><a
                                href="/management/room/roomtype"><img src="/icon_imgs/academic year.PNG" alt="">
                                <p class="fw-normal pt-1">ROOM TYPE</p>
                            </a></div>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                    <div class="card row1-data-card text-center">
                        <div class="card-body d-flex align-items-center justify-content-center"><a
                                href="/management/room/rtstage"><img src="/icon_imgs/organization.png" alt="">
                                <p class="fw-normal pt-1">ROOM TRANSACTION STAGE</p>
                            </a></div>
                    </div>
                </div>

                <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                    <div class="card row1-data-card text-center">
                        <div class="card-body d-flex align-items-center justify-content-center"><a href="/management/room/rtypes"><img src="/icon_imgs/campus.png"
                                    alt="">
                                    <p class="fw-normal pt-1">ROOM TRANSACTION TYPE</p>
                            </a></div>
                    </div>
                </div>

                <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                    <div class="card row1-data-card text-center">
                        <div class="card-body d-flex align-items-center justify-content-center"><a href="/management/room/transaction"><img src="/icon_imgs/campus.png"
                                    alt="">
                                    <p class="fw-normal pt-1">ROOM TRANSACTION</p>
                            </a></div>
                    </div>
                </div>

                <div class="card-header text-uppercase d-flex">
                    <h5>ROOM DATA</h5>
                </div>
                <div class="card-body">
                    <input type="search" id="searchkeyword" placeholder="search">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="roomTable">
                            <thead>
                                <th>Room No</th>
                                <th>Building</th>
                                <th>Type</th>
                                <th>Floor</th>
                                <th>Capacity</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                                <th>Is Basement</th>
                                <th>Handled By</th>
                                <th>Campus</th>
                                <th>Is Processed</th>
                                <th>Action</th>
                            </thead>
                            <tbody>
                                <% for (let room of roomList) { %>
                                <tr>
                                    <td><%- room.room_number %></td>
                                    <td><%- room.building_name %></td>
                                    <td><%- room.room_type %></td>
                                    <td><%- room.floor_number %></td>
                                    <td><%- room.capacity %></td>
                                    <td><%- room.start_time %></td>
                                    <td><%- room.end_time %></td>
                                    <td><%- room.is_basement ? 'Yes' : 'No' %></td>
                                    <td><%- room.handled_by %></td>
                                    <td><%- room.campus %></td>
                                    <td><%- room.is_processed ? 'Yes' : 'No' %></td>
                                    <td>
                                        <i class="fas fa-edit text-dark cursor-pointer edit-room"
                                            data-room-id="<%- room.id %>" data-toggle="modal"
                                            data-target="#update-room-modal"></i>
                                        <a href="/management/room/delete?id=<%- room.id %>"
                                            class="fas fa-trash-alt text-danger del-entry"></a>
                                    </td>
                                </tr>

                                <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- <div class="row my-3 gx-1 gy-3 row1-data">

                    <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                        <div class="card row1-data-card text-center">
                            <div class="card-body d-flex align-items-center justify-content-center"><a href="/management/room/roomtype"><img src="/icon_imgs/academic year.PNG" alt="">
                                    <p class="fw-normal pt-1">ROOM TYPE</p>
                                </a></div>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-4 col-md-6 d-flex flex-column align-items-center">
                        <div class="card row1-data-card text-center">
                            <div class="card-body d-flex align-items-center justify-content-center"><a href="/management/room/rtstage"><img src="/icon_imgs/organization.png" alt="">
                                    <p class="fw-normal pt-1">ROOM TRANSACTION STAGE</p>
                                </a></div>
                        </div>
                    </div> -->
            <!-- 
             

        </div>


    </div>
  DASHBOARD CONTENT END-->
</div>
</div>
<%- include("../partials/footer") %>
<script>
    $('#searchkeyword').on('input', delay(function (e) {
        let keyword = $("#searchkeyword").val()
        $.ajax({
            type: "POST",
            url: "/management/room-search",
            data: {
                keyword: keyword
            },
            success: function (data) {
                console.log('roomList::::::', data)
                let roomList = data.data;

                let quoteAjax = `<table class="table table-bordered" id="roomTable">
                    <thead>
                                <th>Room No</th>
                                <th>Building</th>
                                <th>Type</th>
                                <th>Floor</th>
                                <th>Capacity</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                                <th>Is Basement</th>
                                <th>Handled By</th>
                                <th>Campus</th>
                                <th>Is Processed</th>
                                <th>Action</th>
                    </thead>
                    <tbody>`;

                if (roomList.length > 0) {
                    for (room of roomList) {
                        quoteAjax +=
                            ` <tr>
                                <td>${room.room_number}</td>
                                <td>${room.building_name}</td>
                                <td>${room.room_type}</td>
                                <td>${room.floor_number}</td>
                                <td>${room.capacity}</td>
                                <td>${room.start_time}</td>
                                <td>${room.end_time}</td>
                                <td>${room.is_basement}</td>
                                <td>${room.handled_by}</td>
                                <td>${room.campus}</td>
                                <td>${room.is_processed ? 'Yes' : 'No'}</td>
                               <td>
                                    <i class="fas fa-edit text-dark cursor-pointer edit-room"
                                        data-room-id="${room.id}" data-toggle="modal"
                                        data-target="#update-room-modal"></i>
                                    <a data-room-id="${room.id}"
                                        class="fas fa-trash-alt text-danger delete-room"></a>
                                </td>
                            </tr>`;
                    }
                } else {
                    quoteAjax +=
                        ` <tr>
                                <td colspan="12">No Data Found</td>
                            </tr>`;
                }


                quoteAjax += `<tbody></table>`
                $("#roomTable").html(quoteAjax);
            }
        })
    }, 500));
</script>
<%- include("../partials/footerEnd") %>