<%- include("../partials/head") %>
<%- include("../partials/leftSidebar") %>
<%- include("../partials/header") %>
<!--Notificaion icon-->
<!--HEADER END-->

<div class="main-content">
    <!--DASHBOARD CONTENT START-->


    <div class="card table-card">
        <div class="card-header table-card-header text-uppercase d-flex align-items-center justify-content-between">
            <div>
                <h5>DAYS</h5>
            </div>
            <div>
            </div>
        </div>

        <div class="card-body table-responsive">

            <table class="table custom_row" id="dayTable">
                <thead>
                    <th>Day of week</th>
                    <th>Day Name</th>
                    <th>is Lecture</th>
                    <th>Action</th>
                </thead>
                <tbody>
                    <%for(day of dayList){%>
                    <tr>
                        <td><%- day.day_of_week %></td>
                        <td><%- day.day_name %></td>
                        <td><%- day.is_lecture %></td>
                        <td> <label class="switch">
                                <input type="checkbox" class="changeStatus" data-id="<%- day.id %>"
                                    value="<%- day.is_lecture %>" data-status="<%- day.is_lecture_status %>"
                                    <%- day.is_lecture == 'Yes' ? 'Checked' :  ''  %>>
                                <span class="switch-slider round"></span>
                            </label></td>

                    </tr>
                    <%}%>
                </tbody>
            </table>
        </div>
    </div>
</div>
<!--DASHBOARD CONTENT END-->





<%- include("../partials/footer") %>
                    <script>
                        $(document).ready(function () {

                            //Create 
                            $('#dayTable').on('change', '.changeStatus', function () {
                                console.log($(this).attr('data-id'))
                                console.log($(this).attr('data-status'))

                                if ($(this).is(':checked')) {
                                    console.log('Yes')
                                    chnageStatus($(this).attr('data-id'), 1)
                                } else {
                                    console.log('No')
                                    chnageStatus($(this).attr('data-id'), 0)
                                }
                            })

                            function chnageStatus(id, status) {
                                let ApiObj = {
                                    url: '/admin/days',
                                    type: 'POST',
                                    data: {
                                        id: id,
                                        status: status
                                    },
                                    dataType: 'JSON'
                                }

                                ajaxApi(ApiObj).then(result => {
                                    location.reload()
                                }).catch(error => {

                                })
                            }


                        })
                    </script>
                    <%- include("../partials/footerEnd") %>