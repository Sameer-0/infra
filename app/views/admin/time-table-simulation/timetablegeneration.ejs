<%- include("../partials/head") %>
<%- include("../partials/leftSidebar") %>
<%- include("../partials/header") %>
<!--Notificaion icon-->
<!--HEADER END-->

<div class="main-content">
    <!--DASHBOARD CONTENT START-->
    <div class="breadcrumbs-container">
    
        <ul class="breadcrumb">
            <% if(breadcrumbs){%> <% for (let crumbs of breadcrumbs){%>
                <li><a href="<%- crumbs.url%>"><%- crumbs.name%></a></li>
                <%} }%>
        </ul>
    </div>

    <%- include("../partials/timetablesimulation-menu") %>
    <div class="card table-card mb-3">
        <div class="card-body">
            <div class="row">
            <div class="input-groups col-xl-6 col-md-12">
                <label for="program-name">Select Program:</label>
                <select name="program-name" id="program-name" class="form-select">
                    <% for(program of programList){%>
                    <option value="<%- program.id%>"><%-program.program_name%></option>
                    <%}%>
                </select>
            </div>
            <div class="input-groups col-xl-6 col-md-12">
                <label for="program-name">Select Session:</label>
                <select name="session-name" id="session-name" class="form-select">
                 
                </select>
            </div>
        </div>
        </div>
    </div>

    <div class="card table-card">
        <div class="card-header table-card-header text-uppercase d-flex align-items-center justify-content-between">
            <div>
                <h5>Time Table Generated</h5>
            </div>
        </div>

        <div class="card-body">
            <div class="table-searchbar-container"><button type="button"><i class="fas fa-search"></i> </button><input
                    type="search" id="searchkeyword" placeholder="Enter keywords" class="table-searchbar">
            </div>
            <div class="table-responsive">
                <table id="" class="table table-bordered time-table-simulation" style="width: 100%">
                    <!-- <thead> -->
                        <tr>
                            <th scope="col" style="width: 4%;">Room No</th>
                            
                            <th style="width: 11%;">07:30 AM to 08:30 AM</th>
                            
                            <th style="width: 11%;">08:30 AM to 09:30 AM</th>
                            
                            <th style="width: 11%;">10:00 AM to 11:00 AM</th>
                            
                            <th style="width: 11%;">11:00 AM to 12:00 PM</th>
                            
                            <th style="width: 11%;">12:30 PM to 01:30 PM</th>
                            
                            <th style="width: 11%;">01:30 PM to 02:30 PM</th>
                            
                            <th style="width: 11%;">03:00 PM to 04:00 PM</th>
                            
                            <th style="width: 11%;">04:00 PM to 05:00 PM</th>
                            
                            <th style="width: 11%;">05:00 PM to 06:00 PM</th>
                            
                            <th>06:00 PM to 07:00 PM</th>
                            
                            <th>07:00 PM to 08:00 PM</th>
                            
                            <th>08:00 PM to 09:00 PM</th>
                        </tr>
                    <!-- </thead> -->
                    <tbody>
                        <tr>
                            <td>201</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


</div>

<%- include("../partials/footer") %>

</script>

<script>
    $(document).ready(function () {

    //Getting campus Bulding List
    $("#program-name").on('change', function () {
            let program_lid = $(this).val()
            let ApiObj = {
                url: '/admin/time-table-simulation/time-table-generation',
                type: 'POST',
                data: {
                    program_lid: program_lid
                },
                dataType: 'JSON'
            }

            ajaxApi(ApiObj).then(result => {
                let sessionList = ``;
                 
console.log('result:::', result)
                if (result.length > 0) {
                    sessionList +=
                        `<option disabled selected value="">--Select Session--</option>`;
                    result.forEach(element => {
                        sessionList += `<option value="${element.id}">
                                ${element.acad_session}
                            </option>`
                    });
                } else {
                    sessionList += `<option value="">
                                        No Session Found!
                                    </option>`
                }
                sessionList += `</select>`;
                $("#session-name").html(sessionList).trigger('change')
            }).catch(error => {
                showError(error.responseJSON)
            })
        })

    })
</script>
<%- include("../partials/footerEnd") %>